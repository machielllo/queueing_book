\usepackage{preamble}

\title{Analysis of Queueing Systems with  Sample Paths and Simulation}
\author{Nicky D. van  Foreest}

\begin{document}
\frontmatter
\maketitle

\setcounter{tocdepth}{1}
\tableofcontents

\loadgeometry{tufte}


\opt{all-solutions-at-end}{
\Opensolutionfile{hint}
\Opensolutionfile{ans}
}


\mainmatter

\chapter{Introduction}
\label{cha:introduction}

\subfile{preliminaries.tex}


\chapter{Construction and Simulation of Queueing Systems}
\label{cha:single-stat-queu}


The first step to analyze a queueing system is to model it.
And for this, there is often not a better start than to build a simulation model.
For this reason, the aim of  this first chapter is to teach you how to construct and simulate queueing processes.

In~\cref{sec:constr-discr-time} we build discrete-time models of queueing systems, which means that we use the number of jobs that arrive and can be served in fixed periods of time to construct the queueing process.
Such a period can be an hour, or a day; in fact, any amount of time that makes sense in the context in which the model will be used.
Typically, we model the number of arrivals and potential services as random variables, and in many practical settings it is reasonable to take the number of arrivals in a period as Poisson distributed.
This being the case, we consider the Poisson distribution in~\cref{sec:poisson-distribution}, and once we have an understanding of this process, we can use random number generators to generate (Poisson distributed) random numbers of arrivals and services to drive the simulator.


In~\cref{sec:constr-gg1-queu} we focus on constructing queueing processes in continuous time.
In this setting, the inter-arrival times and service times of individual jobs become of importance, and then exponentially distributed random variables play a fundamental role.
We therefore discuss the properties of the exponential distribution in~\cref{sec:expon-distr}.
There we also mention the interesting and close relationship between the exponential distribution and the Poisson distribution.

As will become apparent, both types of constructing queueing processes, the discrete-time and continuous-time models, are easy to implement as computer programs.
We include many exercises to show you the astonishing diversity of queueing systems that can be analyzed by simulation.
In passing, we develop a number of performance measures to provide insight into the (transient and long-run average) behavior of queueing processes.


\subfile{constructiondiscretetime.tex}

\subfile{poissondistribution.tex}
\subfile{constructioncontinuoustime.tex}
\subfile{expdistribution.tex}

\chapter{From Transient to Steady-state Analysis}
\label{cha:from-trans-steady}


With the tools developed in~\cref{cha:single-stat-queu} we can \emph{simulate} queueing processes.
We now make a start with developing \emph{mathematical models} of queueing systems.
However, as we will see in~\cref{sec:queu-proc-as}, the mathematical characterization of the \emph{transient behavior} of even simple queueing system is already extremely complicated.
Thus, we have to lower our goals, and for this reason we will focus on the long-run average behavior of queueing systems.


In~\cref{sec:rate-stability} we formally define the concepts of arrival and service rate and use these to define stability and load.
The notions of arrival and service rate are crucial because they capture our intuition that when jobs can be served faster than they arrive, on average, the queue does not systematically drift to infinity.
Once stability is ensured, we can properly define a number of measures to characterize the performance of the queueing system, such as the long-run average waiting time, see \cref{sec:limits-of-empirical}.


Before introducing these definitions, however, we introduce in~\cref{sec:kendalls-notation} some commonly used notation to characterize the type of queueing process.

Finally,  in~\cref{sec:graphical-summaries_1} we provide an overview of the relations  introduced in the previous and this chapter.


\subfile{kendall.tex}
\subfile{random_walk.tex}
\subfile{ratestability.tex}
\subfile{empiricalperfmeasures.tex}
\subfile{figure_summaries_1.tex}

\chapter{Approximate Queueing Models}
\label{cha:approximate-models}


In the previous two chapters we learned how to construct and simulate queueing processes.
Simulation is a powerful tool but one of its limitations is that it does not easily provide insight into structural behavior of systems.
For this we need theoretical models, and the derivation of such models form the contents of the remainder of the book.


\newthought{In this chapter} we discuss two formulas that might be considered as the most important formulas to understand the behavior of queueing systems.
The first is Sakasegawa's formula that approximates the expected queueing time in a $G/G/c$; the second characterizes the propagation of variability through a tandem network of $G/G/c$ queues.
With a bit of exaggeration, it is justified to say that the entire philosophy behind lean manufacturing and the world-famous Toyota production system are based on the principles that can be derived from these two formulas.

Here we take these formulas for granted, but focus on the insights they provide into the performance of queueing systems and how to use them to guide improvement procedures for production and service systems. In~\cref{sec:mg1} we provide the theoretical background of Sakasegawa's formula.


In~\cref{sec:gg1} we introduce Sakasegawa's formula and discuss the main insights it offers.
Then we illustrate how to use this formula to estimate waiting times in three queueing settings in which the service process is interrupted.
In the first case,~\cref{sec:setups-batch-proc}, the server has to produce jobs from different families, and there is a change-over time required to switch from one production family to another.
As such setups reduce the time the server is available, the load must increase.
In fact, to reduce the load, the server produces in batches of fixed sizes.
In the second case, in~\cref{sec:non-preempt-interr}, the server sometimes requires small adjustments, for instance, to prevent the production quality to degrade below a certain level.
Clearly, such adjustments are typically not required during a job's service; however, they can occur between any two jobs.
As a consequence, the number of jobs served between two such adjustments (or setups) is not constant, hence different from batch production where  batch sizes are constant.
In the third example, in~\cref{sec:preempt-interr-serv}, quality problems or break downs can occur during a job's service.
These make job service times more variable, which leads to longer expected queueing times.
In the final~\cref{sec:tandem-queues}, we concentrate on tandem queues.

In passing, we use some interesting results of probability theory and the Poisson process, which we use again in, for instance,~\cref{cha:queu-contr-open}.

\subfile{sakasegawa.tex}
\subfile{setup_times.tex}
\subfile{adjustments.tex}
\subfile{failures.tex}
\subfile{tandem.tex}

\chapter{Fundamental tools}
\label{cha:fundamental-tools}


To develop mathematical models of queueing systems we need a few concepts that are fundamentally important and have a general interest beyond queueing.
All these concepts rely on \emph{sample-path constructions} of queueing, or more general stochastic, systems.
We will see that sample paths, which are in fact realizations of simulations of queueing systems, form an elegant and unifying principle.

Here we keep the discussion in these notes mostly at an intuitive level; we refer to \cite{el-taha98:_sampl_path_analy_queuein_system} for proofs and further background.


\subfile{renewal_reward.tex}
\subfile{levelcrossing.tex}
\subfile{pasta.tex}
\subfile{little.tex}
\subfile{figure_summaries_2.tex}

\chapter{Exact Queueing Models}
\label{cha:analytical-models}

In this chapter we use the concepts of~\cref{cha:fundamental-tools} to model and analyze many queueing systems in steady state.
The simplest, non-trivial, case is the $M/M/1$ queue, which is the topic of~\cref{sec:mm1}.
As the main ideas are based on sample-paths, it turns out to be  nearly trivial to extend the analysis of the $M/M/1$ to the $M(n)/M(n)/1$ queue in~\cref{sec:mnmn1}.
The $M(n)/M(n)/1$ queue is a very generic model  with which we can find closed-form expressions for the queue length distributions for many other queueing models such as the $M/M/c$ queue or the $M/M/1/K$, i.e., a queueing system with loss,

We then focus on finding the expected queueing time for batch queues, in \cref{sec:mxm1-queue:-expected}, and the $M/G/1$ queue, in~\cref{sec:mg1}.
In the last two sections,  \cref{sec:batch-arrivals} and \cref{sec:distr-queue-length}, we derive expressions for the queue length distributions of the batch queue and the $M/G/1$ queue.

Many of the queueing systems we analyze here are either generalizations of some other model, for instance, the $M(n)/M(n)/1$ generalizes to the $M/M/c$ queue, or reduce to special cases in certain parameter settings, such as that the $M/G/1$ becomes the $M/M/1$ queue when the service times are exponentially distributed.
Quite a number of exercises in this chapter are targeted on \emph{checking} that the general results reduce to those of the special cases.
The reader should understand the importance of such checks.
These exercises are simple in a sense---it is perfectly clear what to do, there is no model to make for instance---, but the algebra can be quite tough at times, and hence it is good practice.

\subfile{mm1.tex}
\subfile{mnmn1_applications.tex}
\subfile{mxm1_pk.tex}
\subfile{mg1.tex}
\subfile{mxm1_distribution.tex}
\subfile{mg1_distribution.tex}


\chapter{Queueing Control and Open Networks}
\label{cha:queu-contr-open}

In this chapter we study two topics: the control of an $M/M/1$ queue and $M/G/1$ by an $N$-policy in~\cref{sec:n-policies,sec:n-policies-mg1}, and open networks of $M/M/c$ stations in~\cref{sec:jackson-networks}.
As we will see, the analysis of the $N$-policy requires to solve an equation of the type $v = c + P v$, where $v$ and $c$ are vectors and $P$ a (stochastic) matrix, while for the networks we need to solve an equation of the type $\lambda = \gamma + \lambda P$, where $\lambda$ and $\gamma$ are (lying) vectors and $P$ is again a (stochastic) matrix.
Since these equations are just the transpose of each other, they allow us to study these two, seemingly unrelated, topics at once.
We concentrate in~\cref{sec:lambda-=-gamma} on the solution of these equations.
The analysis in this chapter illustrates many tools and results of the previous chapters; as such, everything comes together here.

We point out that the techniques developed in this chapter extend (way) beyond just queueing theory; they are worth memorizing.
The concepts we introduce here can for instance be generalized to (optimal) stopping problems, which find many applications beyond queueing, such as in finance, inventory theory, decision theory, and so on.
As another set of extensions, it is possible to make the matrix $P$ and the vector $c$ depend on an action one can take in certain states.
This idea underlies Markov decision theory, which in turn provides the theoretical basis of a number of machine learning tools such as $Q$ learning, reinforcement learning, and so on.
Thus, while this chapter closes our journey on the study of queueing systems, it is a first step toward a much longer journey on the diverse applications of probability theory.



\subfile{n_policies_mm1.tex}
\subfile{n_policies_mg1.tex}
\subfile{open_single_class.tex}
\subfile{gershgorin.tex}

\opt{all-solutions-at-end}{
\Closesolutionfile{hint}
\Closesolutionfile{ans}
\loadgeometry{normal}
\chapter{Hints}
\input{hint}
\chapter{Solutions}
\input{ans}
}


\backmatter

\addcontentsline{toc}{chapter}{Bibliography}
\phantomsection
\bibliographystyle{plainnat}
\bibliography{biblio_nicky}


\chapter{Notation}
\label{sec:notation}
\subfile{notation.tex}



\addcontentsline{toc}{chapter}{Index}
\phantomsection
\printindex


\end{document}
